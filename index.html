<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Message4you</title>
  <style>
    body {
      background: rgb(38, 35, 35);
      font-family: Tahoma, sans-serif;
      color: #222;
      text-align: center;
      padding: 30px;
    }

    h1 {
      font-size: 120px;
      margin-bottom: 5px;
      color: pink;
      text-shadow: 1px 1px 6px rgba(0,0,0,0.2);
    }

    h2 {
      font-size: 40px;
      margin-top: 0;
      color: pink;
    }

    #countdownText {
      font-size: 30px;
      font-weight: bold;
      color: red;
      margin: 12px 0;
    }

    #messageBox {
      margin: 20px auto;
      padding: 20px;
      background: pink;
      border-radius: 12px;
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.6);
      display: flex;
      align-items: flex-start;
      justify-content: flex-start;
      overflow-y: auto;

      width: 80%;
      min-height: 400px;
      max-height: 600px;
    }

    #message {
      font-size: 30px;
      text-align: left;
      margin: 0;
      word-wrap: break-word;
      line-height: 1.5;
    }

    #status {
      margin-top: 15px;
      font-size: 33px;
      font-weight: bold;
      color: red;
    }

    .after-text {
      color: pink;
    }
  </style>
</head>
<body>
  <h1>Message4you</h1>
  <h2 id="to"></h2>

  <p id="countdownText">
    This message will self-destruct in <span id="countdown"></span> seconds…
  </p>

  <div id="messageBox">
    <p id="message"></p>
  </div>

  <p id="status"></p>

  <script>
    const DURATION_SECONDS = 10;
    const TO_TEXT = "GSEA";
    const SECRET_MESSAGE = "Hi! if you're reading this, good morning! Today is another chance to breathe, to grow, and to keep moving toward the life you dream of. You are worthy of love, happiness, and success, never let anyone or anything make you forget that. No matter how hard things get, remember that every storm eventually passes, and the sun always finds a way to shine again. Keep believing in yourself, because you are stronger than the challenges in front of you. Your dreams matter, and step by step, you are getting closer. Smile, take a deep breath, and never give up.";
    const SELF_DESTRUCT_TEXT = "⚠️ The message has self-destructed.";
    const AFTER_TEXT = "— Louis";

    function hashString(str) {
      let h = 0x811c9dc5;
      for (const ch of str) {
        h ^= ch.codePointAt(0);
        h += (h << 1) + (h << 4) + (h << 7) + (h << 8) + (h << 24);
        h >>>= 0;
      }
      return ("00000000" + h.toString(16)).slice(-8);
    }
    const UNIQUE_KEY = "msg_" + hashString(SECRET_MESSAGE);

    const toEl = document.getElementById("to");
    const countdownEl = document.getElementById("countdown");
    const countdownTextEl = document.getElementById("countdownText");
    const messageEl = document.getElementById("message");
    const statusEl = document.getElementById("status");

    toEl.textContent = TO_TEXT;

    function showDestroyed() {
      messageEl.textContent = "";
      statusEl.textContent = SELF_DESTRUCT_TEXT;
      countdownTextEl.innerHTML = `<span class="after-text">${AFTER_TEXT}</span>`;
    }

    if (localStorage.getItem(UNIQUE_KEY) === "true") {
      showDestroyed();
    } else {
      messageEl.textContent = SECRET_MESSAGE;
      let remaining = DURATION_SECONDS;
      countdownEl.textContent = remaining;

      const timer = setInterval(() => {
        remaining--;
        countdownEl.textContent = remaining;

        if (remaining <= 0) {
          clearInterval(timer);
          localStorage.setItem(UNIQUE_KEY, "true");
          showDestroyed();
        }
      }, 1000);
    }
  </script>
</body>
</html>
